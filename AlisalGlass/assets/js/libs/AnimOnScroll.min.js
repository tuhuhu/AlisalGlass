!function(e){"use strict";function t(){var t=a.clientHeight,n=e.innerHeight;return n>t?n:t}function n(){return e.pageYOffset||a.scrollTop}function i(e){var t=0,n=0;do isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft);while(e=e.offsetParent);return{top:t,left:n}}function s(e,s){var o=e.offsetHeight,r=n(),a=r+t(),l=i(e).top,c=l+o,s=s||0;return a>=l+o*s&&c-o*s>=r}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(e,t){this.el=e,this.options=o(this.defaults,t),this._init()}var a=e.document.documentElement;r.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll("#"+this.el.id+" > a")),this.itemsCount=this.items.length,this.itemsRenderedCount=0,this.didScroll=!1;var t=this;imagesLoaded(this.el,function(){Modernizr.cssanimations&&(t.items.forEach(function(e){s(e)&&(t._checkTotalRendered(),classie.add(e,"shown"))}),e.addEventListener("scroll",function(){t._onScrollFn()},!1),e.addEventListener("resize",function(){t._resizeHandler()},!1))})},_onScrollFn:function(){var e=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){e._scrollPage()},60))},_scrollPage:function(){var e=this;this.items.forEach(function(i){classie.has(i,"shown")||classie.has(i,"animate")||!s(i,e.options.viewportFactor)||setTimeout(function(){var s=n()+t()/2;if(e.el.style.WebkitPerspectiveOrigin="50% "+s+"px",e.el.style.MozPerspectiveOrigin="50% "+s+"px",e.el.style.perspectiveOrigin="50% "+s+"px",e._checkTotalRendered(),e.options.minDuration&&e.options.maxDuration){var o=Math.random()*(e.options.maxDuration-e.options.minDuration)+e.options.minDuration+"s";i.style.WebkitAnimationDuration=o,i.style.MozAnimationDuration=o,i.style.animationDuration=o}classie.add(i,"animate")},25)}),this.didScroll=!1},_resizeHandler:function(){function e(){t._scrollPage(),t.resizeTimeout=null}var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(e,1e3)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&e.removeEventListener("scroll",this._onScrollFn)}},e.AnimOnScroll=r}(window);
