!function(e){e.fn.jekyllSearch=function(t){var n=e.extend({jsonFile:"/search.json",template:'<a href="{url}" title="{desc}">{title}</a>',searchResults:".results",searchResultsTitle:"<h4>Search results</h4>",limit:"10",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>",ready:e.noop},t),l=[],s=this,o=e(n.searchResults),r=[];function a(){o.children().remove()}n.jsonFile.length&&o.length&&e.ajax({type:"GET",url:n.jsonFile,dataType:"json",success:function(t,u,i){l=t,s.keyup(function(t){e(this).val().length?function(t){if(a(),o.append(e(n.searchResultsTitle)),t&&t.length)for(var l=0;l<t.length&&l<n.limit;l++){var s=t[l];output=n.template,output=output.replace(/\{(.*?)\}/g,function(e,t){return s[t]}),o.append(e(output))}else o.append(n.noResults)}(function(e){if(r=[],null==e||""===e)return r;e=e.toLowerCase();for(var t=0;t<l.length;t++){var n=l[t];for(key in n)if(n.hasOwnProperty(key))if(n[key]instanceof Array){for(var s=0;s<n[key].length;s++)if(n[key][s].toLowerCase().indexOf(e)>=0){r.push(n);break}}else if(n[key].toLowerCase().indexOf(e)>=0){r.push(n);break}}return r}(e(this).val())):a()}),n.ready.call(s)},error:function(e,t,n){console.log("***ERROR in jekyllSearch.js***"),console.log(e),console.log(t),console.log(n)}})}}(jQuery);
